(function(d,l){function a(e,b){var c=e.getElementsByTagName("canvas")[0],a=getComputedStyle(c).getPropertyValue("width"),g=Math.PI;this.ctx=c.getContext("2d");this.color=getComputedStyle(e).getPropertyValue("color");this.text=e.getElementsByTagName("input")[0];this.value=0;this.parent=b||e;this.r=+a.replace("px","")/2;this.\u03c8=g/50;c.setAttribute("width",a);c.setAttribute("height",a);this.initialize(e).animate(this.value,+this.text.value)}(function(){for(var e=0,b=["ms","moz","webkit","o"],c;!d.requestAnimationFrame&&
(c=b.pop());)d.requestAnimationFrame=d[c+"RequestAnimationFrame"],d.cancelAnimationFrame=d[c+"CancelAnimationFrame"]||d[c+"CancelRequestAnimationFrame"];d.cancelAnimationFrame||(d.cancelAnimationFrame=clearTimeout);d.requestAnimationFrame||(d.requestAnimationFrame=function(b){var c=Date.now(),a=16-(c-e),a=0<a?a:0;e=c+a;return setTimeout(function(){b(e)},a)})})();a.prototype.initialize=function(e){var b=e.getElementsByTagName("li"),a={type:"radio",name:"atomic"},d,g,f,h;this.text.addEventListener("change",
this.listen.bind(this));this.i=h=b.length;this.n=f=100/h;this.radio=[];for(e.setAttribute("data-n",h);h--;)this.radio.unshift(e=l.createElement("input")),e.addEventListener("click",this.listen.bind(this)),d=f*h,g=d-this.text.value,a.id="i"+h,a.value=d,e.checked=0<g&&g<=f&&+this.text.value,this.parent.insertBefore(this.setAttributes(e,a),this.parent.firstChild),b[h].getElementsByTagName("label")[0].setAttribute("for","i"+h);return this};a.prototype.setAttributes=function(e,b){for(var a in b)e.setAttribute(a,
b[a]);return e};a.prototype.animate=function(e,b){function a(){var f=e&&100!==e||r?l:0,s=k+r*h-f,f=s+f+h;~g&&f>p&&(f=p);!~g&&f<p&&(f=p);n.beginPath();n.globalCompositeOperation="destination-"+(~g?"over":"out");n.fillStyle=~g?m.color:"rgba(0, 0, 0, 1)";n.arc(q,q,q,s,f,!~g);n.lineTo(q,q);n.closePath();n.fill();m.value=e+1*g+r++*g;if(r<t&&f!==p)return m.id=d.requestAnimationFrame(a);m.value=b}var m=this,g=b>e?1:-1,f=Math.PI,h=this.\u03c8*g,l=h/2,k=f/-2+this.\u03c8*e,p=f/-2+this.\u03c8*b,t=Math.abs(Math.ceil((p-
k)/h)),n=this.ctx,q=this.r,r=0;this.id=d.requestAnimationFrame(a)};a.prototype.update=function(b){if(b===this.value)return this;100<b&&(b=100);var a=Math.floor(b/this.n),c=this.i-1;b=Math.round(b);this.text.value=b;this.radio[a<c?a:c].checked=!0;d.cancelAnimationFrame(this.id);this.animate(this.value,b);return this};a.prototype.listen=function(b){this.update(+(b.target||b.srcElement).value);return this};for(var k=l.getElementsByClassName("atomic"),b=0;b<k.length;b++)a[b]=new a(k[b]);d.Atomic=a})(window,
document);
(function(d,l){function a(b){this.viewport=b;this.parent=b.parentNode;this.initialize()}var k={38:"previous",40:"next",72:"nav",83:"focus",84:"toggle"};a.prototype.initialize=function(){this.content=this.viewport.getElementsByTagName("section")[0];this.articles=this.content.getElementsByTagName("article");this.initFrame().initNav();d.addEventListener("resize",this.redraw.bind(this));d.addEventListener("keydown",this.hotkeys.bind(this))};a.prototype.setAttributes=Atomic.prototype.setAttributes;a.prototype.text=
function(b){return b.innerText||b.textContent};a.prototype.redraw=function(){this.setAttributes(this.frame,{height:this.parent.offsetHeight+"px",width:this.parent.offsetWidth+"px"})};a.prototype.initFrame=function(){var b=this.frame=l.createElement("iframe");this.setAttributes(b,{seamless:!0,height:this.parent.offsetHeight+"px",width:this.parent.offsetWidth+"px",src:this.viewport.getAttribute("data-load")});this.viewport.insertBefore(b,this.viewport.firstChild);return this};a.prototype.initNav=function(){var b=
["<input type=text value=0 readonly><ol>","</ol><canvas></canvas>"],a=this.setAttributes(l.createElement("section"),{class:"atomic"}),k=this.viewport.getElementsByTagName("nav")[0];d.getComputedStyle(this.articles[0]);for(var c=this.articles.length,m=c,g,f;m--;)f=this.articles[m],g=f.getElementsByTagName("h1")[0],b.splice(1,0,"<li><label>"+this.text(g)+"</label></li>"),f.appendChild(this.setAttributes(l.createElement("label"),{for:"i"+m}));a.innerHTML=b.join("");k.appendChild(a);this.index=-1;this.searchbox=
k.getElementsByTagName("input")[0];this.atomic=new Atomic(a,this.viewport);for(this.max=c-1;c--;)this.atomic.radio[c].addEventListener("change",this.update.bind(this,c));k.getElementsByTagName("form")[0].addEventListener("submit",this.search.bind(this));return this};a.prototype.search=function(b){b.preventDefault();var a=this.searchbox.value;b=this.articles.length;var d=RegExp("("+a+")","ig"),c;if(a)for(;b--;)if(a=this.articles[b],c=this.text(a),d.test(c))for(a=a.getElementsByTagName("*"),c=a.length;c--;)a[c].innerHTML=
this.text(a[c]).replace(d,"<mark>$1</mark>")};a.prototype.render=function(){this.reset().atomic.update(this.atomic.radio[this.index].value)};a.prototype.update=function(a){this.reset();this.index=a};a.prototype.previous=function(a){0>--this.index&&(this.index=0);this.render()};a.prototype.next=function(a){++this.index>this.max&&(this.index=this.max);this.render()};a.prototype.toggle=function(a){this.setClass(~this.viewport.getAttribute("class").indexOf("hide")?"":"hide")};a.prototype.setClass=function(a){this.viewport.setAttribute("class",
"dawn "+a);return this};a.prototype.nav=function(a){this.setClass(~this.viewport.getAttribute("class").indexOf("nav")?"":"nav")};a.prototype.focus=function(a){l.activeElement!==this.searchbox&&this.searchbox&&(a.preventDefault(),this.setClass("nav").searchbox.focus())};a.prototype.reset=function(){this.searchbox.blur();this.viewport.setAttribute("class","dawn");return this};a.prototype.hotkeys=function(a){k[a.keyCode]&&this[k[a.keyCode]].call(this,a)};a.instance=new a(document.getElementsByClassName("dawn")[0]);
d.Dawn=a})(window,document);
