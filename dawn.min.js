(function(c,e){function b(f,b){var d=f.getElementsByTagName("canvas")[0],a=getComputedStyle(d).getPropertyValue("width"),g=Math.PI;this.ctx=d.getContext("2d");this.color=getComputedStyle(f).getPropertyValue("color");this.text=f.getElementsByTagName("input")[0];this.value=0;this.parent=b||f;this.r=+a.replace("px","")/2;this.\u03c8=g/50;d.setAttribute("width",a);d.setAttribute("height",a);this.initialize(f).animate(this.value,+this.text.value)}(function(){for(var f=0,a=["ms","moz","webkit","o"],b;!c.requestAnimationFrame&&
(b=a.pop());)c.requestAnimationFrame=c[b+"RequestAnimationFrame"],c.cancelAnimationFrame=c[b+"CancelAnimationFrame"]||c[b+"CancelRequestAnimationFrame"];c.cancelAnimationFrame||(c.cancelAnimationFrame=clearTimeout);c.requestAnimationFrame||(c.requestAnimationFrame=function(b){var a=Date.now(),d=16-(a-f),d=0<d?d:0;f=a+d;return setTimeout(function(){b(f)},d)})})();b.prototype.initialize=function(f){var b=f.getElementsByTagName("li"),a={type:"radio",name:"atomic"},c,g,n,h;this.text.addEventListener("change",
this.listen.bind(this));this.i=h=b.length;this.n=n=100/h;this.radio=[];for(f.setAttribute("data-n",h);h--;)this.radio.unshift(f=e.createElement("input")),f.addEventListener("click",this.listen.bind(this)),c=n*h,g=c-this.text.value,a.id="i"+h,a.value=c,f.checked=0<g&&g<=n&&+this.text.value,this.parent.insertBefore(this.setAttributes(f,a),this.parent.firstChild),b[h].getElementsByTagName("label")[0].setAttribute("for","i"+h);return this};b.prototype.setAttributes=function(f,a){for(var b in a)f.setAttribute(b,
a[b]);return f};b.prototype.animate=function(a,b){function d(){var e=a&&100!==a||r?k:0,n=s+r*h-e,e=n+e+h;~g&&e>p&&(e=p);!~g&&e<p&&(e=p);m.beginPath();m.globalCompositeOperation="destination-"+(~g?"over":"out");m.fillStyle=~g?l.color:"rgba(0, 0, 0, 1)";m.arc(q,q,q,n,e,!~g);m.lineTo(q,q);m.closePath();m.fill();l.value=a+1*g+r++*g;if(r<t&&e!==p)return l.id=c.requestAnimationFrame(d);l.value=b}var l=this,g=b>a?1:-1,e=Math.PI,h=this.\u03c8*g,k=h/2,s=e/-2+this.\u03c8*a,p=e/-2+this.\u03c8*b,t=Math.abs(Math.ceil((p-
s)/h)),m=this.ctx,q=this.r,r=0;this.id=c.requestAnimationFrame(d)};b.prototype.update=function(a){if(a===this.value)return this;100<a&&(a=100);var b=Math.floor(a/this.n),d=this.i-1;a=Math.round(a);this.text.value=a;this.radio[b<d?b:d].checked=!0;c.cancelAnimationFrame(this.id);this.animate(this.value,a);return this};b.prototype.listen=function(a){this.update(+(a.target||a.srcElement).value);return this};for(var k=e.getElementsByClassName("atomic"),a=0;a<k.length;a++)b[a]=new b(k[a]);c.Atomic=b})(window,
document);
(function(c,e){function b(a){this.viewport=a;this.parent=a.parentNode;this.initialize()}var k={38:"previous",40:"next",72:"nav",83:"search",84:"toggle"};b.prototype.initialize=function(){this.content=this.viewport.getElementsByTagName("section")[0];this.articles=this.content.getElementsByTagName("article");this.initFrame().initNav();c.addEventListener("resize",this.redraw.bind(this));c.addEventListener("keydown",this.hotkeys.bind(this))};b.prototype.setAttributes=Atomic.prototype.setAttributes;b.prototype.redraw=
function(){this.setAttributes(this.frame,{height:this.parent.offsetHeight+"px",width:this.parent.offsetWidth+"px"})};b.prototype.initFrame=function(){var a=this.frame=e.createElement("iframe");this.setAttributes(a,{seamless:!0,height:this.parent.offsetHeight+"px",width:this.parent.offsetWidth+"px",src:this.viewport.getAttribute("data-load")});this.viewport.insertBefore(a,this.viewport.firstChild);return this};b.prototype.initNav=function(){var a=["<input type=text value=0 readonly><ol>","</ol><canvas></canvas>"],
b=this.setAttributes(e.createElement("section"),{class:"atomic"}),k=this.viewport.getElementsByTagName("nav")[0];c.getComputedStyle(this.articles[0]);for(var d=this.articles.length,l=d,g;l--;)g=this.articles[l].getElementsByTagName("h1")[0],a.splice(1,0,"<li><label>"+(g.innerText||g.textContent)+"</label></li>"),this.articles[l].appendChild(this.setAttributes(e.createElement("label"),{for:"i"+l}));b.innerHTML=a.join("");k.appendChild(b);this.index=-1;this.searchbox=k.getElementsByTagName("input")[0];
this.atomic=new Atomic(b,this.viewport);for(this.max=d-1;d--;)this.atomic.radio[d].addEventListener("change",this.update.bind(this,d));return this};b.prototype.render=function(){this.reset().atomic.update(this.atomic.radio[this.index].value)};b.prototype.update=function(a){this.reset();this.index=a};b.prototype.previous=function(a){0>--this.index&&(this.index=0);this.render()};b.prototype.next=function(a){++this.index>this.max&&(this.index=this.max);this.render()};b.prototype.toggle=function(a){this.setClass(~this.viewport.getAttribute("class").indexOf("hide")?
"":"hide")};b.prototype.setClass=function(a){this.viewport.setAttribute("class","dawn "+a);return this};b.prototype.nav=function(a){this.setClass(~this.viewport.getAttribute("class").indexOf("nav")?"":"nav")};b.prototype.search=function(a){e.activeElement!==this.searchbox&&this.searchbox&&(a.preventDefault(),this.setClass("nav").searchbox.focus())};b.prototype.reset=function(){this.searchbox.blur();this.viewport.setAttribute("class","dawn");return this};b.prototype.hotkeys=function(a){k[a.keyCode]&&
this[k[a.keyCode]].call(this,a)};b.instance=new b(document.getElementsByClassName("dawn")[0]);c.Dawn=b})(window,document);
