(function(c,f){function a(b,a){var e=b.getElementsByTagName("canvas")[0],g=getComputedStyle(e).getPropertyValue("width"),d=Math.PI;this.ctx=e.getContext("2d");this.color=getComputedStyle(b).getPropertyValue("color");this.text=b.getElementsByTagName("input")[0];this.value=0;this.parent=a||b;this.r=+g.replace("px","")/2;this.\u03c8=d/50;e.setAttribute("width",g);e.setAttribute("height",g);this.initialize(b).animate(this.value,+this.text.value)}(function(){for(var b=0,a=["ms","moz","webkit","o"],e;!c.requestAnimationFrame&&
(e=a.pop());)c.requestAnimationFrame=c[e+"RequestAnimationFrame"],c.cancelAnimationFrame=c[e+"CancelAnimationFrame"]||c[e+"CancelRequestAnimationFrame"];c.cancelAnimationFrame||(c.cancelAnimationFrame=clearTimeout);c.requestAnimationFrame||(c.requestAnimationFrame=function(a){var e=Date.now(),d=16-(e-b),d=0<d?d:0;b=e+d;return setTimeout(function(){a(b)},d)})})();a.prototype.initialize=function(b){var a=b.getElementsByTagName("li"),e={type:"radio",name:"atomic"},d,c,m,h;this.text.addEventListener("change",
this.listen.bind(this));this.i=h=a.length;this.n=m=100/h;this.radio=[];for(b.setAttribute("data-n",h);h--;)this.radio.unshift(b=f.createElement("input")),b.addEventListener("click",this.listen.bind(this)),d=m*h,c=d-this.text.value,e.id="i"+h,e.value=d,b.checked=0<c&&c<=m&&+this.text.value,this.parent.insertBefore(this.setAttributes(b,e),this.parent.firstChild),a[h].getElementsByTagName("label")[0].setAttribute("for","i"+h);return this};a.prototype.setAttributes=function(b,a){for(var d in a)b.setAttribute(d,
a[d]);return b};a.prototype.animate=function(b,a){function d(){var f=b&&100!==b||r?p:0,m=s+r*h-f,f=m+f+h;~k&&f>n&&(f=n);!~k&&f<n&&(f=n);l.beginPath();l.globalCompositeOperation="destination-"+(~k?"over":"out");l.fillStyle=~k?g.color:"rgba(0, 0, 0, 1)";l.arc(q,q,q,m,f,!~k);l.lineTo(q,q);l.closePath();l.fill();g.value=b+1*k+r++*k;if(r<t&&f!==n)return g.id=c.requestAnimationFrame(d);g.value=a}var g=this,k=a>b?1:-1,f=Math.PI,h=this.\u03c8*k,p=h/2,s=f/-2+this.\u03c8*b,n=f/-2+this.\u03c8*a,t=Math.abs(Math.ceil((n-
s)/h)),l=this.ctx,q=this.r,r=0;this.id=c.requestAnimationFrame(d)};a.prototype.update=function(a){if(a===this.value)return this;100<a&&(a=100);var d=Math.floor(a/this.n),e=this.i-1;a=Math.round(a);this.text.value=a;this.radio[d<e?d:e].checked=!0;c.cancelAnimationFrame(this.id);this.animate(this.value,a);return this};a.prototype.listen=function(a){this.update(+(a.target||a.srcElement).value);return this};for(var p=f.getElementsByClassName("atomic"),d=0;d<p.length;d++)a[d]=new a(p[d]);c.Atomic=a})(window,
document);
(function(c,f){function a(a){this.viewport=a;this.parent=a.parentNode;this.initialize()}var p={27:"hide",37:"previous",38:"previous",39:"next",40:"next",84:"toggle"};a.prototype.initialize=function(){this.content=this.viewport.getElementsByTagName("section")[0];this.articles=this.content.getElementsByTagName("article");this.initFrame().initNav();c.addEventListener("resize",this.redraw.bind(this));c.addEventListener("keydown",this.hotkeys.bind(this))};a.prototype.setAttributes=Atomic.prototype.setAttributes;a.prototype.redraw=
function(){this.setAttributes(this.frame,{height:this.parent.offsetHeight+"px",width:this.parent.offsetWidth+"px"})};a.prototype.initFrame=function(){var a=this.frame=f.createElement("iframe");this.setAttributes(a,{seamless:!0,height:this.parent.offsetHeight+"px",width:this.parent.offsetWidth+"px",src:this.viewport.getAttribute("data-load")});this.viewport.insertBefore(a,this.viewport.firstChild);return this};a.prototype.initNav=function(){for(var a=["<input type=text value=0 readonly><ol>","</ol><canvas></canvas>"],
b=this.setAttributes(f.createElement("section"),{"class":"atomic"}),c=this.nav=f.createElement("nav"),e=this.articles.length,g;e--;)g=this.articles[e].getElementsByTagName("h1")[0],a.splice(1,0,"<li><label>"+(g.innerText||g.textContent)+"</label></li>"),g=f.createElement("label"),g.setAttribute("for","i"+e),g.addEventListener("click",this.update.bind(this,e)),this.content.insertBefore(g,this.content.firstChild);b.innerHTML=a.join("");c.appendChild(b);c.addEventListener("click",this.show.bind(this,
!0));this.viewport.insertBefore(c,this.viewport.firstChild);this.atomic=new Atomic(b,this.viewport);this.index=0;this.max=this.atomic.radio.length-1;return this};a.prototype.render=function(){this.atomic.update(this.atomic.radio[this.index].value)};a.prototype.update=function(a){this.index=a};a.prototype.previous=function(){0>--this.index&&(this.index=0);this.render()};a.prototype.next=function(){++this.index>this.max&&(this.index=this.max);this.render()};a.prototype.toggle=function(){this["hide"===
this.nav.getAttribute("class")?"show":"hide"].call(this)};a.prototype.hide=function(){this.nav.setAttribute("class","hide");this.viewport.setAttribute("class","dawn hide")};a.prototype.show=function(){this.nav.setAttribute("class","show");this.viewport.setAttribute("class","dawn show")};a.prototype.hotkeys=function(a){(a=p[a.keyCode])&&this[a].call(this)};a.instance=new a(document.getElementsByClassName("dawn")[0]);c.Dawn=a})(window,document);